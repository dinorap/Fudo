function createTopbar(svgIcon, titleText, backHref = "../index.html") {
  const header = document.createElement("header");
  header.className = "topbar";
  header.innerHTML = `
    <a class="bar_route" href="${backHref}">
      <div class="topbar_logo">
        <div class="bar_title">
          ${svgIcon}
          <span class="bar_title_text">${titleText}</span>
        </div>
      </div>
    </a>
    <div class="topbar_button">
      <span class="title">
        <i class="dot"></i>
        <i class="dot dot--big"></i>
        <i class="dot"></i>
      </span>
      <span class="divider"></span>
      <span class="close">×</span>
    </div>
  `;
  return header;
}

function renderTopbar(containerSelector, svgIcon, titleText, backHref) {
  const container = document.querySelector(containerSelector);
  if (container) {
    container.prepend(createTopbar(svgIcon, titleText, backHref));
  }
}

const menuHTML = `
<a class="tabbar_item " href="../index.html"><span><svg width="24" height="25" viewBox="0 0 24 25"
            fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M7.91299 14.7462C7.78656 14.6526 7.6429 14.5847 7.4902 14.5465C7.3375 14.5083 7.17876 14.5004 7.02304 14.5235C6.86732 14.5465 6.71766 14.6 6.58263 14.6807C6.44759 14.7615 6.32981 14.8681 6.23601 14.9943C6.14221 15.1205 6.07423 15.2639 6.03596 15.4164C5.99768 15.5688 5.98986 15.7273 6.01293 15.8828C6.036 16.0383 6.08952 16.1877 6.17043 16.3225C6.25134 16.4573 6.35805 16.5749 6.48448 16.6686C8.07481 17.8557 10.0067 18.4981 11.9924 18.5C13.9781 18.4981 15.91 17.8557 17.5003 16.6686C17.6294 16.5761 17.7388 16.4588 17.8221 16.3237C17.9054 16.1886 17.961 16.0383 17.9856 15.8815C18.0101 15.7248 18.0032 15.5647 17.9653 15.4106C17.9273 15.2566 17.859 15.1116 17.7644 14.9841C17.6698 14.8566 17.5507 14.7492 17.4141 14.6681C17.2775 14.587 17.1261 14.5338 16.9688 14.5117C16.8114 14.4896 16.6512 14.4989 16.4975 14.5392C16.3438 14.5794 16.1996 14.6498 16.0734 14.7462C14.8958 15.6277 13.4642 16.1051 11.9924 16.107C10.5212 16.1047 9.09012 15.6274 7.91299 14.7462Z"
                fill="#292C2B" />
            <path fill-rule="evenodd" clip-rule="evenodd"
                d="M12 1.75C11.275 1.75 10.613 1.95 9.88999 2.287C9.18799 2.614 8.37799 3.097 7.36199 3.702L5.90599 4.569C4.78699 5.236 3.89599 5.767 3.21999 6.275C2.52299 6.8 1.99999 7.34 1.65999 8.051C1.31799 8.762 1.22599 9.507 1.25499 10.376C1.28399 11.217 1.43099 12.24 1.61499 13.522L1.90799 15.554C2.14499 17.204 2.33399 18.513 2.61499 19.532C2.90499 20.582 3.31699 21.417 4.05999 22.056C4.80199 22.696 5.68999 22.981 6.77599 23.118C7.83199 23.25 9.16299 23.25 10.842 23.25H13.158C14.838 23.25 16.168 23.25 17.224 23.118C18.31 22.981 19.198 22.696 19.94 22.057C20.683 21.417 21.095 20.583 21.385 19.532C21.666 18.512 21.855 17.204 22.092 15.554L22.384 13.522C22.569 12.24 22.716 11.217 22.744 10.376C22.774 9.506 22.682 8.762 22.341 8.051C22 7.34 21.477 6.8 20.78 6.275C20.105 5.767 19.213 5.236 18.094 4.569L16.638 3.702C15.622 3.097 14.812 2.614 14.111 2.287C13.387 1.949 12.725 1.75 12 1.75ZM8.09599 5.011C9.15299 4.381 9.89899 3.938 10.524 3.646C11.133 3.362 11.571 3.25 12 3.25C12.43 3.25 12.867 3.362 13.476 3.646C14.101 3.938 14.846 4.381 15.904 5.011L17.289 5.836C18.454 6.53 19.275 7.02 19.879 7.474C20.466 7.917 20.789 8.283 20.989 8.699C21.188 9.115 21.271 9.593 21.246 10.325C21.22 11.075 21.086 12.016 20.894 13.351L20.614 15.288C20.368 17.002 20.192 18.216 19.939 19.133C19.692 20.029 19.394 20.548 18.962 20.92C18.529 21.293 17.968 21.513 17.037 21.63C16.086 21.749 14.849 21.75 13.107 21.75H10.894C9.15099 21.75 7.91399 21.749 6.96299 21.63C6.03299 21.513 5.47099 21.293 5.03799 20.92C4.60599 20.548 4.30799 20.029 4.06099 19.133C3.80799 18.216 3.63099 17.002 3.38499 15.288L3.10599 13.351C2.91399 12.016 2.77999 11.074 2.75399 10.325C2.72899 9.593 2.81199 9.115 3.01199 8.699C3.21199 8.283 3.53299 7.917 4.12199 7.474C4.72499 7.02 5.54599 6.53 6.71099 5.836L8.09599 5.011Z"
                fill="#292C2B" />
        </svg>
    </span><small>Cửa hàng</small></a>
<a class="tabbar_item" href="../pages/product_page.html"><span><svg width="24" height="25" viewBox="0 0 24 25" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
                d="M18.75 14C19.5788 14 20.25 12.6575 20.25 11C20.25 9.3425 19.5788 8 18.75 8C17.9212 8 17.25 9.3425 17.25 11C17.25 12.6575 17.9212 14 18.75 14Z"
                fill="#292C2B" />
            <path
                d="M2.667 4.22825C3.6885 3.0455 4.82775 2.75 5.25 2.75H18.75C20.2222 2.75 21.354 3.9245 22.0725 5.3615C22.8135 6.84275 23.25 8.83775 23.25 11C23.25 13.1622 22.8135 15.1572 22.0725 16.6385C21.354 18.0755 20.223 19.25 18.75 19.25H15.75V21.5C15.75 21.8978 15.592 22.2794 15.3107 22.5607C15.0294 22.842 14.6478 23 14.25 23H2.25C1.85218 23 1.47064 22.842 1.18934 22.5607C0.908035 22.2794 0.75 21.8978 0.75 21.5V11C0.75 7.502 1.626 5.4335 2.667 4.22825ZM16.7692 6.032C16.1527 7.265 15.75 9.02 15.75 11C15.75 12.7325 16.0583 14.2925 16.5487 15.482C16.6185 15.6515 16.692 15.8135 16.7692 15.968C17.4075 17.2453 18.1515 17.75 18.75 17.75C19.3485 17.75 20.0925 17.2453 20.7308 15.968C21.3472 14.735 21.75 12.98 21.75 11C21.75 9.02 21.3472 7.265 20.7308 6.032C20.0925 4.75475 19.3485 4.25 18.75 4.25C18.1515 4.25 17.4075 4.75475 16.7692 6.032ZM5.25 4.25C5.25525 4.25 5.25075 4.25075 5.23875 4.25375C5.136 4.27625 4.47825 4.42625 3.80175 5.20925C3.0615 6.0665 2.25 7.748 2.25 11V21.5H14.25V11C14.25 8.83775 14.6865 6.84275 15.4275 5.3615C15.6262 4.964 15.8558 4.5875 16.116 4.25H5.25Z"
                fill="#292C2B" />
        </svg>
    </span><small>Sản phẩm</small></a>
<a class="tabbar_item" href="../pages/cart_page.html"><span><svg width="28" height="26" viewBox="0 0 28 26" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
                d="M15 12.5C15.2652 12.5 15.5196 12.3946 15.7071 12.2071C15.8946 12.0196 16 11.7652 16 11.5C16 11.2348 15.8946 10.9804 15.7071 10.7929C15.5196 10.6054 15.2652 10.5 15 10.5C14.7348 10.5 14.4804 10.6054 14.2929 10.7929C14.1054 10.9804 14 11.2348 14 11.5C14 11.7652 14.1054 12.0196 14.2929 12.2071C14.4804 12.3946 14.7348 12.5 15 12.5ZM10 11.5C10 11.7652 9.89464 12.0196 9.70711 12.2071C9.51957 12.3946 9.26522 12.5 9 12.5C8.73478 12.5 8.48043 12.3946 8.29289 12.2071C8.10536 12.0196 8 11.7652 8 11.5C8 11.2348 8.10536 10.9804 8.29289 10.7929C8.48043 10.6054 8.73478 10.5 9 10.5C9.26522 10.5 9.51957 10.6054 9.70711 10.7929C9.89464 10.9804 10 11.2348 10 11.5Z"
                fill="#292C2B" />
            <path fill-rule="evenodd" clip-rule="evenodd"
                d="M8.24999 6.776V6.5C8.24999 5.50544 8.64508 4.55161 9.34834 3.84835C10.0516 3.14509 11.0054 2.75 12 2.75C12.9946 2.75 13.9484 3.14509 14.6516 3.84835C15.3549 4.55161 15.75 5.50544 15.75 6.5V6.776C16.408 6.796 16.995 6.833 17.515 6.898C18.716 7.05 19.689 7.368 20.44 8.102C20.69 8.347 20.913 8.618 21.104 8.912C21.676 9.792 21.798 10.808 21.711 12.016C21.625 13.198 21.329 14.682 20.952 16.565L20.932 16.66C20.672 17.967 20.464 19.007 20.206 19.826C19.941 20.668 19.602 21.35 19.036 21.902C18.841 22.092 18.631 22.264 18.406 22.418C17.754 22.865 17.019 23.063 16.141 23.158C15.288 23.25 14.228 23.25 12.895 23.25H11.105C9.77199 23.25 8.71199 23.25 7.85899 23.158C6.98099 23.063 6.24599 22.865 5.59399 22.418C5.3696 22.2644 5.15882 22.0917 4.96399 21.902C4.39799 21.35 4.05899 20.668 3.79399 19.826C3.53699 19.007 3.32899 17.967 3.06699 16.66L3.04799 16.565C2.67199 14.682 2.37499 13.198 2.28999 12.016C2.20199 10.808 2.32399 9.792 2.89599 8.912C3.08679 8.61835 3.30948 8.3467 3.55999 8.102C4.31199 7.368 5.28399 7.05 6.48499 6.898C7.00499 6.833 7.59199 6.796 8.24999 6.776ZM9.74999 6.5C9.74999 5.90326 9.98705 5.33097 10.409 4.90901C10.831 4.48705 11.4033 4.25 12 4.25C12.5967 4.25 13.169 4.48705 13.591 4.90901C14.0129 5.33097 14.25 5.90326 14.25 6.5V6.752C13.826 6.75 13.378 6.75 12.905 6.75H11.095C10.622 6.75 10.175 6.75 9.74999 6.752V6.5ZM4.60799 9.175C5.02299 8.77 5.61599 8.52 6.67299 8.386C7.74299 8.251 9.16299 8.25 11.149 8.25H12.852C14.838 8.25 16.256 8.251 17.327 8.386C18.384 8.52 18.977 8.77 19.392 9.175C19.563 9.342 19.715 9.528 19.846 9.729C20.162 10.215 20.291 10.846 20.215 11.909C20.137 12.985 19.86 14.376 19.471 16.324C19.199 17.683 19.006 18.644 18.775 19.375C18.55 20.092 18.31 20.515 17.989 20.828C17.856 20.9577 17.7121 21.0758 17.559 21.181C17.189 21.434 16.727 21.586 15.98 21.667C15.217 21.749 14.237 21.75 12.851 21.75H11.15C9.76399 21.75 8.78399 21.749 8.01999 21.667C7.27399 21.587 6.81299 21.434 6.44299 21.181C6.28949 21.0755 6.1453 20.9571 6.01199 20.827C5.69099 20.514 5.45199 20.092 5.22599 19.375C4.99599 18.643 4.80199 17.683 4.53099 16.324C4.14099 14.376 3.86399 12.984 3.78699 11.908C3.70999 10.846 3.83899 10.215 4.15499 9.729C4.28545 9.52817 4.43771 9.34238 4.60899 9.175H4.60799Z"
                fill="#292C2B" />
            <circle cx="22.5" cy="7" r="5.5" fill="#599240" />
            <path
                d="M21.1055 4.26416C20.9336 4.49333 20.8512 4.79948 20.8584 5.18262H19.4297C19.444 4.7959 19.5103 4.42887 19.6284 4.08154C19.7537 3.77718 19.9507 3.49609 20.2192 3.23828C20.4198 3.05566 20.6579 2.91602 20.9336 2.81934C21.2093 2.72266 21.5477 2.67432 21.9487 2.67432C22.6935 2.67432 23.2933 2.86768 23.748 3.25439C24.2064 3.63753 24.4355 4.15316 24.4355 4.80127C24.4355 5.2596 24.2995 5.64632 24.0273 5.96143C23.8555 6.15837 23.6764 6.29264 23.4902 6.36426C23.6299 6.36426 23.8304 6.48421 24.0918 6.72412C24.4821 7.08577 24.6772 7.57992 24.6772 8.20654C24.6772 8.8654 24.4481 9.44548 23.9897 9.94678C23.535 10.4445 22.86 10.6934 21.9648 10.6934C20.862 10.6934 20.0957 10.3335 19.666 9.61377C19.4404 9.23063 19.3151 8.72933 19.29 8.10986H20.7939C20.7939 8.42139 20.8441 8.6792 20.9443 8.8833C21.1305 9.25928 21.4689 9.44727 21.9595 9.44727C22.2603 9.44727 22.5216 9.34521 22.7437 9.14111C22.9692 8.93343 23.082 8.63623 23.082 8.24951C23.082 7.73747 22.8743 7.39551 22.459 7.22363C22.2227 7.12695 21.8503 7.07861 21.3418 7.07861V5.98291C21.8395 5.97575 22.1868 5.92741 22.3838 5.83789C22.724 5.6875 22.894 5.38314 22.894 4.9248C22.894 4.6276 22.8063 4.3859 22.6309 4.19971C22.459 4.01351 22.2155 3.92041 21.9004 3.92041C21.5387 3.92041 21.2738 4.03499 21.1055 4.26416Z"
                fill="white" />
        </svg>
    </span><small>Giỏ hàng</small></a>
<a class="tabbar_item" href="../pages/order_page.html"><span><svg width="24" height="25" viewBox="0 0 24 25" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
                d="M12 1.75C11.395 1.75 10.838 1.9 10.229 2.152C9.64 2.396 8.956 2.755 8.105 3.202L6.037 4.287C4.992 4.835 4.157 5.274 3.51 5.705C2.842 6.152 2.326 6.622 1.951 7.259C1.577 7.894 1.409 8.582 1.328 9.401C1.25 10.196 1.25 11.173 1.25 12.403V12.597C1.25 13.827 1.25 14.804 1.328 15.599C1.409 16.419 1.578 17.106 1.951 17.741C2.326 18.378 2.841 18.848 3.511 19.295C4.156 19.726 4.992 20.165 6.037 20.713L8.105 21.798C8.956 22.245 9.64 22.604 10.229 22.848C10.839 23.1 11.395 23.25 12 23.25C12.605 23.25 13.162 23.1 13.771 22.848C14.36 22.604 15.044 22.245 15.895 21.798L17.963 20.714C19.008 20.165 19.843 19.726 20.489 19.295C21.159 18.848 21.674 18.378 22.049 17.741C22.423 17.106 22.591 16.418 22.672 15.599C22.75 14.804 22.75 13.827 22.75 12.597V12.403C22.75 11.173 22.75 10.196 22.672 9.401C22.591 8.581 22.422 7.894 22.049 7.259C21.674 6.622 21.159 6.152 20.489 5.705C19.844 5.274 19.008 4.835 17.963 4.287L15.895 3.202C15.044 2.755 14.36 2.396 13.771 2.152C13.161 1.9 12.605 1.75 12 1.75ZM8.77 4.546C9.66 4.079 10.284 3.753 10.802 3.539C11.306 3.33 11.661 3.25 12 3.25C12.34 3.25 12.694 3.33 13.198 3.539C13.716 3.753 14.339 4.079 15.229 4.546L17.229 5.596C18.319 6.167 19.084 6.57 19.657 6.952C19.939 7.141 20.16 7.316 20.34 7.492L17.009 9.157L8.509 4.683L8.77 4.546ZM6.945 5.504L6.771 5.596C5.681 6.167 4.916 6.57 4.344 6.952C4.09993 7.11022 3.87126 7.29102 3.661 7.492L12 11.662L15.357 9.982L7.151 5.664C7.0735 5.62313 7.00378 5.56897 6.945 5.504ZM2.938 8.807C2.888 9.021 2.849 9.264 2.821 9.547C2.751 10.261 2.75 11.164 2.75 12.441V12.558C2.75 13.836 2.75 14.739 2.821 15.452C2.89 16.149 3.021 16.6 3.244 16.98C3.466 17.357 3.787 17.676 4.344 18.048C4.916 18.43 5.681 18.833 6.771 19.404L8.771 20.454C9.661 20.921 10.284 21.247 10.802 21.461C10.966 21.529 11.113 21.583 11.25 21.626V12.963L2.938 8.807ZM12.75 21.625C12.887 21.583 13.034 21.529 13.198 21.461C13.716 21.247 14.339 20.921 15.229 20.454L17.229 19.404C18.319 18.832 19.084 18.43 19.657 18.048C20.213 17.676 20.534 17.357 20.757 16.98C20.98 16.6 21.11 16.15 21.179 15.452C21.249 14.739 21.25 13.836 21.25 12.559V12.442C21.25 11.164 21.25 10.261 21.179 9.548C21.1565 9.29901 21.1174 9.05179 21.062 8.808L17.75 10.463V13.5C17.75 13.6989 17.671 13.8897 17.5303 14.0303C17.3897 14.171 17.1989 14.25 17 14.25C16.8011 14.25 16.6103 14.171 16.4697 14.0303C16.329 13.8897 16.25 13.6989 16.25 13.5V11.213L12.75 12.963V21.625Z"
                fill="#292C2B" />
        </svg>
    </span><small>Đơn hàng</small></a>
<a class="tabbar_item" href="../pages/info_page.html"><span><svg width="24" height="25" viewBox="0 0 24 25" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
                d="M21.9731 20.1875C20.6878 17.9316 18.6807 16.1738 16.275 15.1972C17.4713 14.2999 18.355 13.049 18.8009 11.6216C19.2468 10.1942 19.2322 8.66274 18.7593 7.24407C18.2865 5.8254 17.3792 4.59148 16.166 3.71709C14.9529 2.84271 13.4954 2.37219 12 2.37219C10.5046 2.37219 9.04706 2.84271 7.83392 3.71709C6.62078 4.59148 5.7135 5.8254 5.24061 7.24407C4.76772 8.66274 4.75319 10.1942 5.19907 11.6216C5.64496 13.049 6.52865 14.2999 7.72498 15.1972C5.31928 16.1738 3.31221 17.9316 2.02686 20.1875C1.94721 20.3156 1.89413 20.4583 1.87076 20.6073C1.8474 20.7563 1.85423 20.9085 1.89084 21.0548C1.92746 21.2011 1.99312 21.3385 2.08392 21.4589C2.17472 21.5794 2.2888 21.6803 2.41938 21.7557C2.54996 21.8312 2.69438 21.8796 2.84405 21.8981C2.99373 21.9166 3.14559 21.9049 3.29062 21.8635C3.43566 21.8222 3.57089 21.7521 3.6883 21.6574C3.8057 21.5628 3.90288 21.4455 3.97404 21.3125C5.67279 18.3763 8.67279 16.625 12 16.625C15.3272 16.625 18.3272 18.3772 20.0259 21.3125C20.1802 21.5605 20.4248 21.7388 20.7081 21.8097C20.9914 21.8806 21.2912 21.8386 21.544 21.6925C21.7969 21.5464 21.9831 21.3077 22.0631 21.0268C22.1432 20.746 22.1109 20.445 21.9731 20.1875ZM7.12498 9.5C7.12498 8.53582 7.41089 7.59329 7.94657 6.7916C8.48224 5.98991 9.24361 5.36507 10.1344 4.99609C11.0252 4.62712 12.0054 4.53057 12.951 4.71868C13.8967 4.90678 14.7653 5.37108 15.4471 6.05286C16.1289 6.73464 16.5932 7.60328 16.7813 8.54894C16.9694 9.4946 16.8729 10.4748 16.5039 11.3656C16.1349 12.2564 15.5101 13.0177 14.7084 13.5534C13.9067 14.0891 12.9642 14.375 12 14.375C10.7075 14.3735 9.4684 13.8594 8.55448 12.9455C7.64056 12.0316 7.12647 10.7925 7.12498 9.5Z"
                fill="#292C2B" />
        </svg>
    </span><small>Cá nhân</small></a>
`;

document.addEventListener('DOMContentLoaded', () => {
  const tabItems = document.querySelectorAll('.tabbar_item');
  const currentPath = window.location.pathname; 

  tabItems.forEach(item => {
    const linkPath = new URL(item.href).pathname;

    if (currentPath === '/' && linkPath.endsWith('/index.html')) {
      item.classList.add('tabbar_item--active');
    }
    else if (currentPath === linkPath) {
      item.classList.add('tabbar_item--active');
    }

    item.addEventListener('click', () => {
      tabItems.forEach(tab => tab.classList.remove('tabbar_item--active'));
      item.classList.add('tabbar_item--active');
    });
  });
});